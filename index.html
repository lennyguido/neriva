<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NERIVA - Tu tienda online</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            overflow-x: hidden;
        }

        :root {
            --green: #00ff41;
            --green-glow: rgba(0, 255, 65, 0.4);
            --black: #000;
            --white: #fff;
            --gray: #888;
            --dark-gray: #0a0a0a;
        }

        /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
        header {
            background: rgba(0, 0, 0, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
            padding: 1.2rem 5%;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 255, 65, 0.1);
        }

        .header-logo {
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--green) 0%, #00dd35 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
            letter-spacing: -1px;
            transition: all 0.3s;
        }

        .header-logo:hover {
            filter: drop-shadow(0 0 10px var(--green-glow));
        }

        .header-cta {
            background: var(--green);
            color: var(--black);
            padding: 0.7rem 1.8rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 0.95rem;
            transition: all 0.3s;
            box-shadow: 0 0 20px var(--green-glow);
            white-space: nowrap;
        }

        .header-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--green-glow);
        }

        /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
        .hero {
            padding: 8rem 5% 6rem;
            text-align: center;
            background: radial-gradient(ellipse at top, #0a1f0a 0%, #000 50%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--green-glow) 0%, transparent 70%);
            opacity: 0.15;
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.15; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.25; transform: translateX(-50%) scale(1.1); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--white) 0%, var(--green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.5rem;
            letter-spacing: -2px;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: #aaa;
            margin-bottom: 1rem;
            font-weight: 300;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--gray);
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-badges {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .badge {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 65, 0.2);
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        /* ‚îÄ‚îÄ‚îÄ FILTROS ‚îÄ‚îÄ‚îÄ */
        .filters {
            padding: 2.5rem 5%;
            background: var(--dark-gray);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            position: sticky;
            top: 73px;
            z-index: 999;
            backdrop-filter: blur(10px);
        }

        .filter-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(0, 255, 65, 0.3);
            border-radius: 50px;
            padding: 1.1rem 1.8rem;
            color: var(--white);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-box::placeholder {
            color: var(--gray);
        }

        .search-box:focus {
            outline: none;
            border-color: var(--green);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 20px var(--green-glow);
        }

        .filter-btn {
            background: rgba(255, 255, 255, 0.06);
            border: 2px solid rgba(255, 255, 255, 0.15);
            color: var(--white);
            padding: 0.9rem 1.8rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .filter-btn:hover {
            background: rgba(0, 255, 65, 0.1);
            border-color: var(--green);
            transform: translateY(-2px);
        }

        .filter-btn.active {
            background: var(--green);
            color: var(--black);
            border-color: var(--green);
            box-shadow: 0 0 20px var(--green-glow);
        }

        /* ‚îÄ‚îÄ‚îÄ PRODUCTOS ‚îÄ‚îÄ‚îÄ */
        .productos-section {
            padding: 5rem 5%;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 50vh;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--white) 0%, var(--green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 3rem;
        }

        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2.5rem;
        }

        .producto-card {
            background: linear-gradient(145deg, #121212 0%, #0a0a0a 100%);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .producto-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 0%, var(--green-glow) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .producto-card:hover {
            transform: translateY(-12px);
            border-color: var(--green);
            box-shadow: 0 25px 50px rgba(0, 255, 65, 0.25);
        }

        .producto-card:hover::before {
            opacity: 0.4;
        }

        .producto-imagen {
            width: 100%;
            height: 320px;
            background: #050505;
            overflow: hidden;
            position: relative;
        }

        .producto-imagen img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .producto-card:hover .producto-imagen img {
            transform: scale(1.15);
        }

        .no-image {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            color: var(--gray);
        }

        .producto-info {
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        .producto-categoria {
            color: var(--green);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 0.8rem;
            font-weight: 700;
        }

        .producto-nombre {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--white);
            min-height: 2.6rem;
            line-height: 1.3;
        }

        .producto-precio {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--green);
            margin-bottom: 1.2rem;
        }

        .btn-ver-mas {
            background: transparent;
            border: 2px solid var(--green);
            color: var(--green);
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s;
            font-weight: 700;
            font-size: 0.95rem;
            width: 100%;
            text-align: center;
        }

        .btn-ver-mas:hover {
            background: var(--green);
            color: var(--black);
            box-shadow: 0 0 20px var(--green-glow);
        }

        /* ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.97);
            z-index: 2000;
            padding: 2rem;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(145deg, #151515 0%, #0a0a0a 100%);
            border-radius: 25px;
            border: 1px solid rgba(0, 255, 65, 0.3);
            max-width: 1200px;
            width: 100%;
            position: relative;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: var(--white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.8rem;
            transition: all 0.3s;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: var(--green);
            color: var(--black);
            border-color: var(--green);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 3.5rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
        }

        .modal-imagen {
            width: 100%;
            height: 500px;
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-imagen img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-info h2 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .modal-categoria {
            color: var(--green);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 2rem;
            font-weight: 700;
        }

        .modal-precio {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--green) 0%, #00dd35 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 2rem 0;
        }

        .modal-descripcion {
            color: #aaa;
            line-height: 1.9;
            margin-bottom: 2.5rem;
            font-size: 1.1rem;
        }

        .modal-features {
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .modal-features h4 {
            color: var(--green);
            margin-bottom: 1rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-whatsapp {
            background: var(--green);
            color: var(--black);
            padding: 1.5rem 3.5rem;
            border-radius: 50px;
            text-decoration: none;
            display: inline-block;
            font-weight: 800;
            font-size: 1.15rem;
            transition: all 0.3s;
            box-shadow: 0 0 30px var(--green-glow);
            width: 100%;
            text-align: center;
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 40px var(--green-glow);
        }

        /* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
        footer {
            background: linear-gradient(180deg, var(--dark-gray) 0%, #000 100%);
            border-top: 1px solid rgba(0, 255, 65, 0.2);
            padding: 4rem 5% 2rem;
            margin-top: 6rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }

        .footer-logo {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--green) 0%, #00dd35 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.5rem;
        }

        .footer-tagline {
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 3rem;
        }

        .footer-contact {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .footer-link {
            display: block;
            color: #aaa;
            text-decoration: none;
            margin-bottom: 0.8rem;
            transition: all 0.3s;
            font-size: 0.95rem;
            padding: 0.3rem 0;
        }

        .footer-link:hover {
            color: var(--green);
            transform: translateX(5px);
        }

        .footer-icon {
            display: inline-block;
            margin-right: 0.5rem;
        }

        .footer-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, rgba(0, 255, 65, 0.3) 50%, transparent 100%);
            margin: 2rem 0;
        }

        .footer-bottom {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .empty-state {
            text-align: center;
            padding: 8rem 2rem;
            color: var(--gray);
            grid-column: 1 / -1;
        }

        .empty-state h3 {
            font-size: 2.5rem;
            color: var(--white);
            margin-bottom: 1rem;
        }

        .empty-state p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           RESPONSIVE ‚Äî pantallas ‚â§ 768px
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        @media (max-width: 768px) {

            /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
            header {
                padding: 1rem 4%;
                gap: 0.5rem;
            }

            .header-logo {
                font-size: 1.6rem;
            }

            .header-cta {
                font-size: 0.82rem;
                padding: 0.6rem 1.1rem;
            }

            /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
            .hero {
                padding: 4.5rem 5% 3.5rem;
            }

            .hero h1 {
                font-size: 2.8rem;
                letter-spacing: -1px;
                margin-bottom: 1rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
                margin-bottom: 0.8rem;
            }

            .hero p {
                font-size: 0.95rem;
                margin-bottom: 2rem;
            }

            .hero-badges {
                gap: 0.7rem;
                margin-top: 1.2rem;
            }

            .badge {
                font-size: 0.78rem;
                padding: 0.55rem 1rem;
            }

            /* ‚îÄ‚îÄ Filtros ‚îÄ‚îÄ */
            .filters {
                padding: 1.2rem 4%;
                /* El header en m√≥vil mide ~62px */
                top: 62px;
            }

            .filter-container {
                flex-direction: column;
                gap: 0.8rem;
                align-items: stretch;
            }

            .search-box {
                min-width: unset;
                width: 100%;
                padding: 0.9rem 1.4rem;
                font-size: 0.95rem;
            }

            /* Contenedor de botones de categor√≠a: scroll horizontal */
            #filterButtons {
                display: flex !important;
                flex-wrap: nowrap !important;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                gap: 0.6rem !important;
                padding-bottom: 4px;
                /* Ocultar scrollbar visualmente */
                scrollbar-width: none;
            }

            #filterButtons::-webkit-scrollbar {
                display: none;
            }

            .filter-btn {
                flex-shrink: 0;
                padding: 0.7rem 1.2rem;
                font-size: 0.85rem;
            }

            /* ‚îÄ‚îÄ Grid de productos ‚îÄ‚îÄ */
            .productos-section {
                padding: 3rem 4%;
            }

            .section-title {
                font-size: 1.8rem;
                margin-bottom: 1.8rem;
            }

            .productos-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .producto-imagen {
                height: 240px;
            }

            .producto-info {
                padding: 1.4rem;
            }

            .producto-nombre {
                font-size: 1.1rem;
                min-height: unset;
            }

            .producto-precio {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            .btn-ver-mas {
                padding: 0.75rem 1.4rem;
                font-size: 0.9rem;
            }

            /* ‚îÄ‚îÄ Modal ‚îÄ‚îÄ */
            .modal {
                padding: 0;
                align-items: flex-end;  /* slide desde abajo en mobile */
            }

            .modal-content {
                border-radius: 20px 20px 0 0;
                max-height: 92vh;
                overflow-y: auto;
                width: 100%;
            }

            .modal-body {
                grid-template-columns: 1fr;
                padding: 1.6rem 1.4rem 2rem;
                gap: 1.5rem;
            }

            .modal-close {
                top: 1rem;
                right: 1rem;
                width: 40px;
                height: 40px;
                font-size: 1.4rem;
            }

            .modal-imagen {
                height: 260px;
            }

            .modal-info h2 {
                font-size: 1.6rem;
                padding-right: 2.5rem; /* evitar solapamiento con bot√≥n cerrar */
            }

            .modal-precio {
                font-size: 2.4rem;
                margin: 1rem 0;
            }

            .modal-descripcion {
                font-size: 0.95rem;
                margin-bottom: 1.5rem;
            }

            .modal-features {
                padding: 1rem;
                margin-bottom: 1.5rem;
            }

            .btn-whatsapp {
                padding: 1.1rem 2rem;
                font-size: 1rem;
            }

            /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
            footer {
                padding: 3rem 5% 1.5rem;
                margin-top: 3rem;
            }

            .footer-logo {
                font-size: 2rem;
                margin-bottom: 1rem;
            }

            .footer-tagline {
                font-size: 0.95rem;
                margin-bottom: 2rem;
            }

            .footer-link:hover {
                transform: none;
            }

            .footer-bottom {
                font-size: 0.82rem;
            }

            /* ‚îÄ‚îÄ Empty state ‚îÄ‚îÄ */
            .empty-state {
                padding: 4rem 1rem;
            }

            .empty-state h3 {
                font-size: 1.6rem;
            }

            .empty-state p {
                font-size: 1rem;
            }
        }

        /* Ajuste fino para pantallas muy peque√±as (‚â§ 380px) */
        @media (max-width: 380px) {
            .hero h1 {
                font-size: 2.2rem;
            }

            .header-logo {
                font-size: 1.4rem;
            }

            .header-cta {
                font-size: 0.76rem;
                padding: 0.5rem 0.9rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="#" class="header-logo">NERIVA</a>
        <a href="#productos" class="header-cta">üõçÔ∏è Ver productos</a>
    </header>

    <div class="hero">
        <div class="hero-content">
            <h1>NERIVA</h1>
            <div class="hero-subtitle">Tu tienda online</div>
            <p>Los mejores productos al mejor precio. Calidad garantizada, env√≠os r√°pidos y atenci√≥n personalizada.</p>
            <div class="hero-badges">
                <div class="badge">‚úì Env√≠o gratis</div>
                <div class="badge">‚úì Garant√≠a oficial</div>
                <div class="badge">‚úì Productos de calidad</div>
            </div>
        </div>
    </div>

    <div class="filters">
        <div class="filter-container">
            <input type="text" class="search-box" id="searchInput" placeholder="üîç Buscar productos...">
            <div id="filterButtons">
                <!-- Los botones de categor√≠a se generan solos desde los datos -->
            </div>
        </div>
    </div>

    <section class="productos-section" id="productos">
        <h2 class="section-title">Productos Destacados</h2>
        <div class="productos-grid" id="productosGrid">
            <div class="empty-state">
                <h3>Cargando productos...</h3>
            </div>
        </div>
    </section>

    <div class="modal" id="productoModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <div class="modal-body">
                <div class="modal-imagen" id="modalImagenContainer"></div>
                <div class="modal-info">
                    <p class="modal-categoria" id="modalCategoria"></p>
                    <h2 id="modalNombre"></h2>
                    <div class="modal-precio" id="modalPrecio"></div>
                    <p class="modal-descripcion" id="modalDescripcion"></p>
                    <div class="modal-features">
                        <h4>üíé Producto Premium</h4>
                        <p style="color: #aaa; font-size: 0.95rem;">Consult√° disponibilidad y medios de pago por WhatsApp</p>
                    </div>
                    <a href="#" class="btn-whatsapp" id="modalWhatsapp" target="_blank">üí¨ Comprar por WhatsApp</a>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">NERIVA</div>
            <p class="footer-tagline">Tu tienda online</p>
            
            <div class="footer-contact">
                <a href="https://wa.me/5491153386599" target="_blank" class="footer-link">
                    <span class="footer-icon">üí¨</span> WhatsApp: +54 9 11 5338-6599
                </a>
                <a href="https://instagram.com/nerivashop" target="_blank" class="footer-link">
                    <span class="footer-icon">üì∏</span> Instagram: @nerivashop
                </a>
            </div>
            
            <div class="footer-divider"></div>
            <p class="footer-bottom">¬© 2026 NERIVA - Todos los derechos reservados</p>
        </div>
    </footer>

<script>
const SHEET_URL = 'https://docs.google.com/spreadsheets/d/11cgwoDZwEC4KqjD-5dOHucJ2wsWvMK2QmDAYQDmXvyQ/gviz/tq?tqx=out:json';

let todosLosProductos = [];
let categoriaActiva = 'todos';

async function cargarProductosDesdeSheets() {
    try {
        const response = await fetch(SHEET_URL);
        const text = await response.text();

        const json = JSON.parse(text.substring(47).slice(0, -2));
        const rows = json.table.rows;

        const productos = rows.map((r, index) => {
            const c = r.c.map(col => col ? col.v : '');
            return {
                id: index + 1,
                nombre: c[0],
                categoria: c[1],
                precio: parseFloat(String(c[2]).replace(/[^\d]/g, '')),
                descripcion: c[3],
                imagen: c[4] ? String(c[4]).trim() : ''
            };
        }).filter(p => p.nombre);

        todosLosProductos = productos;

        generarFiltros(productos);
        renderizarProductos(productos);

    } catch (err) {
        console.error('ERROR SHEETS:', err);
        document.getElementById('productosGrid').innerHTML = `
            <div class="empty-state">
                <h3>Error al cargar productos</h3>
                <p>No se pudo conectar con la base de datos. Intent√° de nuevo m√°s tarde.</p>
            </div>
        `;
    }
}

function generarFiltros(productos) {
    const categorias = [...new Set(productos.map(p => p.categoria).filter(Boolean))].sort();

    const container = document.getElementById('filterButtons');
    container.style.display = 'flex';
    container.style.gap = '1rem';
    container.style.flexWrap = 'wrap';

    const btnTodos = document.createElement('button');
    btnTodos.className = 'filter-btn active';
    btnTodos.dataset.category = 'todos';
    btnTodos.textContent = 'Todos';
    btnTodos.addEventListener('click', () => filtrarPor('todos', btnTodos));
    container.appendChild(btnTodos);

    categorias.forEach(cat => {
        const btn = document.createElement('button');
        btn.className = 'filter-btn';
        btn.dataset.category = cat;
        btn.textContent = cat;
        btn.addEventListener('click', () => filtrarPor(cat, btn));
        container.appendChild(btn);
    });
}

function filtrarPor(categoria, btnClickeado) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btnClickeado.classList.add('active');
    categoriaActiva = categoria;

    document.getElementById('searchInput').value = '';
    const lista = categoria === 'todos'
        ? todosLosProductos
        : todosLosProductos.filter(p => p.categoria === categoria);
    renderizarProductos(lista);
}

function renderizarProductos(productos) {
    const grid = document.getElementById('productosGrid');
    grid.innerHTML = '';

    if (productos.length === 0) {
        grid.innerHTML = `
            <div class="empty-state">
                <h3>No encontramos nada</h3>
                <p>Prob√° con otra b√∫squeda o categor√≠a.</p>
            </div>
        `;
        return;
    }

    productos.forEach(producto => {
        const card = document.createElement('div');
        card.className = 'producto-card';
        card.onclick = () => abrirModal(producto);

        card.innerHTML = `
            <div class="producto-imagen">
                ${producto.imagen
                    ? `<img src="${producto.imagen}" alt="${producto.nombre}" loading="lazy">`
                    : `<div class="no-image">üì¶</div>`}
            </div>
            <div class="producto-info">
                <div class="producto-categoria">${producto.categoria}</div>
                <h3 class="producto-nombre">${producto.nombre}</h3>
                <div class="producto-precio">$${producto.precio.toLocaleString('es-AR')}</div>
                <span class="btn-ver-mas">Ver detalles ‚Üí</span>
            </div>
        `;

        grid.appendChild(card);
    });
}

function abrirModal(producto) {
    document.getElementById('modalCategoria').textContent = producto.categoria;
    document.getElementById('modalNombre').textContent = producto.nombre;
    document.getElementById('modalPrecio').textContent = `$${producto.precio.toLocaleString('es-AR')}`;
    document.getElementById('modalDescripcion').textContent = producto.descripcion;

    document.getElementById('modalImagenContainer').innerHTML =
        producto.imagen
            ? `<img src="${producto.imagen}" alt="${producto.nombre}">`
            : `<div class="no-image" style="height:100%;display:flex;align-items:center;justify-content:center;font-size:5rem;">üì¶</div>`;

    const mensaje = `Hola! Me interesa el/la ${producto.nombre} - $${producto.precio.toLocaleString('es-AR')}`;
    const urlWhatsApp = `https://wa.me/5491153386599?text=${encodeURIComponent(mensaje)}`;
    document.getElementById('modalWhatsapp').href = urlWhatsApp;

    document.getElementById('productoModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeModal() {
    document.getElementById('productoModal').classList.remove('active');
    document.body.style.overflow = '';
}

document.getElementById('productoModal').addEventListener('click', function(e) {
    if (e.target === this) closeModal();
});

document.addEventListener('keydown', e => {
    if (e.key === 'Escape') closeModal();
});

document.getElementById('searchInput').addEventListener('input', e => {
    const t = e.target.value.toLowerCase();
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    const btnTodos = document.querySelector('[data-category="todos"]');
    if (btnTodos) btnTodos.classList.add('active');

    renderizarProductos(
        todosLosProductos.filter(p =>
            p.nombre.toLowerCase().includes(t) ||
            (p.descripcion && p.descripcion.toLowerCase().includes(t)) ||
            (p.categoria && p.categoria.toLowerCase().includes(t))
        )
    );
});

cargarProductosDesdeSheets();
</script>

</body>
</html>
